# ============================================================================
# FILE: config/feature_config.yaml
# ============================================================================

# Feature engineering configuration
date_columns:
  - Accident_Date
  - FNOL_Date
  - Settlement_Date
  - Date_of_Birth
  - Full_License_Issue_Date

imputation:
  numeric:
    columns:
      - Estimated_Claim_Amount
      - Ultimate_Claim_Amount
    strategy: median
  
  categorical:
    columns:
      - Traffic_Condition
      - Weather_Condition
    strategy: most_frequent

feature_engineering:
  derived_features:
    - name: FNOL_Delay
      description: "Days between accident and FNOL reporting"
      formula: "FNOL_Date - Accident_Date"
      
    - name: Settlement_Delay
      description: "Days between FNOL and settlement"
      formula: "Settlement_Date - FNOL_Date"
      
    - name: Driver_Age
      description: "Driver age at time of accident"
      formula: "Accident_Date - Date_of_Birth (in years)"
      
    - name: License_Age
      description: "Years since license issue"
      formula: "Accident_Date - Full_License_Issue_Date (in years)"
      
    - name: Vehicle_Age
      description: "Vehicle age at time of accident"
      formula: "Accident_Date year - Vehicle_Year"
      
    - name: High_Risk_Driver
      description: "Flag for high risk age groups"
      condition: "Driver_Age < 25yrs or Driver_Age > 65yrs"
      
    - name: Inexperienced_Driver
      description: "Flag for drivers with < 2 years license"
      condition: "License_Age < 2yrs"
      
    - name: Old_Vehicle
      description: "Flag for vehicles > 10 years old"
      condition: "Vehicle_Age > 10yrs"
      
    - name: Early_FNOL
      description: "Flag for FNOL reported within 1 day"
      condition: "FNOL_Delay <= 24hrs"

    - name: Estimate_to_Age_Ratio
      description: "Helps identify potential Total Losses"
      formula: "Estimated_Claim_Amount / (Vehicle Age + 1)"

    - name: Estimate_Bucket
      description: "This reduces 'target leakage' by turning Estimate_Claims_Amount into a general bucket"
      bucket: "('0-1k','1k-5k','5k-10k','10k-20k','20k-50k','50+'')"

    - name: Estimate_Relative_to_Type
      description: "Is this estimate high compared to other claims of the same type?"
      formula: "Estimated_Claim_Amount / (Avg Estimate for the CLaim Type)"

    - name: Complexity_Score
      description: "Is this condition a severe scenario?"
      formula: "High traffic + Bad weather + High Estimate = High Complexity Claim"
      
categorical_features:
  - Traffic_Condition
  - Weather_Condition
  - High_Risk_Driver
  - Inexperienced_Driver
  - Old_Vehicle
  - Early_FNOL
  - Estimate_Bucket
  - Claim_Type
  - Vehicle_Type
  - Complexity_Score

numeric_features:
  - FNOL_Delay
  - Driver_Age
  - License_Age
  - Vehicle_Age
  - Estimate_to_Age_Ratio
  - Estimate_Relative_to_Type
